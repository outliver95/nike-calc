<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ì¸ & ì—ì´ë‹¤ ì›¡ ê³µê²©ë ¥ ë¹„êµ</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; background: #0f111a; color: #e0e0e0; padding: 20px; display: flex; justify-content: center; }
        .card { background: #1a1d29; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.6); width: 100%; max-width: 700px; border: 1px solid #2d3245; }
        h2 { text-align: center; color: #ffca28; margin-bottom: 1.5rem; text-transform: uppercase; letter-spacing: 1px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .input-group { margin-bottom: 12px; }
        label { display: block; margin-bottom: 6px; font-weight: bold; font-size: 0.85rem; color: #94a3b8; }
        input { width: 100%; padding: 12px; border: 1px solid #334155; border-radius: 8px; box-sizing: border-box; background: #0f172a; color: #f8fafc; font-size: 1rem; }
        
        .result-section { margin-top: 25px; background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #334155; }
        h3 { margin-top: 0; font-size: 1.1rem; color: #38bdf8; border-left: 4px solid #38bdf8; padding-left: 10px; margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border: 1px solid #334155; padding: 12px; text-align: center; }
        th { background: #0f172a; color: #64748b; }
        
        .winner { color: #38bdf8; font-weight: bold; font-size: 1.1rem; }
        
        .status-box { padding: 15px; background: rgba(15, 23, 42, 0.7); border-radius: 8px; border: 1px solid #475569; line-height: 1.8; font-size: 0.95rem; }
        .mvp-text { color: #059669; font-weight: bold; border-bottom: 1px solid #059669; }
        .buff-list { color: #cbd5e1; font-size: 0.85rem; margin-top: 5px; list-style: none; padding-left: 0; }
        .highlight { color: #ffca28; }

        /* ì¸ì‚¬ì´íŠ¸(í•„ìš” ìˆ˜ì¹˜) ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .insight-box { margin-top: 20px; padding: 15px; background: #0f172a; border-radius: 8px; border: 2px dashed #334155; font-size: 0.9rem; }
        .alert { border-color: #ef4444; color: #fca5a5; }
        .success { border-color: #10b981; color: #6ee7b7; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸ“Š ì•„ì¸ & ì—ì´ë‹¤ ë¹„êµ ê³„ì‚°ê¸°</h2>
    
    <div class="grid">
        <div>
            <h4 style="color: #ffca28; border-bottom: 1px solid #ffca28; padding-bottom: 5px;">ì—ì´ë‹¤ ì›¡</h4>
            <div class="input-group">
                <label>400ë ™ ê³µê²©ë ¥</label>
                <input type="number" id="atkZ" value="80000" oninput="calculate()">
            </div>
            <div class="input-group">
                <label>ì˜¤ë²„ ê³µì¦ (%)</label>
                <input type="number" id="overZ" value="0" step="0.01" oninput="calculate()">
            </div>
        </div>
        <div>
            <h4 style="color: #38bdf8; border-bottom: 1px solid #38bdf8; padding-bottom: 5px;">ì•„ì¸</h4>
            <div class="input-group">
                <label>400ë ™ ê³µê²©ë ¥</label>
                <input type="number" id="atkE" value="80000" oninput="calculate()">
            </div>
            <div class="input-group">
                <label>ì˜¤ë²„ ê³µì¦ (%)</label>
                <input type="number" id="overE" value="0" step="0.01" oninput="calculate()">
            </div>
        </div>
    </div>

    <div class="result-section">
        <h3>1. ì—ì´ë‹¤ ì›¡ ë²„ìŠ¤íŠ¸ ì‹œ</h3>
        <table>
            <thead><tr><th>ë‹ˆì¼€</th><th>ìµœì¢… ê³µê²©ë ¥</th></tr></thead>
            <tbody>
                <tr><td>ì—ì´ë‹¤ ì›¡</td><td id="res_z_z">-</td></tr>
                <tr><td>ì•„ì¸</td><td id="res_z_e">-</td></tr>
            </tbody>
        </table>
        <div class="status-box" id="status_z"></div>
    </div>

    <div class="result-section">
        <h3>2. ì•„ì¸ ë²„ìŠ¤íŠ¸ ì‹œ</h3>
        <table>
            <thead><tr><th>ë‹ˆì¼€</th><th>ìµœì¢… ê³µê²©ë ¥</th></tr></thead>
            <tbody>
                <tr><td>ì—ì´ë‹¤ ì›¡</td><td id="res_e_z">-</td></tr>
                <tr><td>ì•„ì¸</td><td id="res_e_e">-</td></tr>
            </tbody>
        </table>
        <div class="status-box" id="status_e"></div>
    </div>

    <div id="insight-container" class="insight-box">
        ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´ ì„¸íŒ… ì¡°ì–¸ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
    </div>
</div>

<script>
function calculate() {
    const atkZ = parseFloat(document.getElementById('atkZ').value) || 0;
    const overZ = (parseFloat(document.getElementById('overZ').value) || 0) / 100;
    const atkE = parseFloat(document.getElementById('atkE').value) || 0;
    const overE = (parseFloat(document.getElementById('overE').value) || 0) / 100;

    const ami = 0.404, z1s = 0.6, zB = 0.4, e1s = 0.7012;

    const vz_z = atkZ * (1 + ami + z1s + zB + overZ);
    const vz_e = atkE * (1 + ami + e1s + overE);
    const ve_z = atkZ * (1 + ami + overZ);
    const ve_e = atkE * (1 + ami + e1s + z1s + overE);

    updateValue('res_z_z', vz_z, vz_e);
    updateValue('res_z_e', vz_e, vz_z);
    updateValue('res_e_z', ve_z, ve_e);
    updateValue('res_e_e', ve_e, ve_z);

    // í…ìŠ¤íŠ¸ ìš”ì•½ ì—…ë°ì´íŠ¸
    const mvpZ = vz_z > vz_e ? "ì—ì´ë‹¤ ì›¡" : "ì•„ì¸";
    document.getElementById('status_z').innerHTML = `
        <div>ğŸ¯ í˜„ì¬ <span class="mvp-text">${mvpZ}</span>ì´(ê°€) ë²„í”„ë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.</div>
        <ul class="buff-list">
            <li>â€¢ <span class="highlight">ì—ì´ë‹¤ ì›¡</span>: ì• ë¯¸ë€ë‹¤ê³µì¦(40.4%) + 1ìŠ¤(60%) + ë²„ìŠ¤íŠ¸(40%) + ì˜¤ë²„(${ (overZ*100).toFixed(2) }%)</li>
            <li>â€¢ <span class="highlight">ì•„ì¸</span>: ì• ë¯¸ë€ë‹¤ê³µì¦(40.4%) + 1ìŠ¤(70.12%) + ì˜¤ë²„(${ (overE*100).toFixed(2) }%)</li>
        </ul>
    `;

    const mvpE = ve_e > ve_z ? "ì•„ì¸" : "ì—ì´ë‹¤ ì›¡";
    document.getElementById('status_e').innerHTML = `
        <div>ğŸ¯ í˜„ì¬ <span class="mvp-text">${mvpE}</span>ì´(ê°€) ë²„í”„ë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.</div>
        <ul class="buff-list">
            <li>â€¢ <span class="highlight">ì•„ì¸</span>: ì• ë¯¸ë€ë‹¤ê³µì¦(40.4%) + 1ìŠ¤(70.12%) + <b>ì—ì´ë‹¤ ì‹œê³µì¦(60%)</b> + ì˜¤ë²„(${ (overE*100).toFixed(2) }%)</li>
            <li>â€¢ <span class="highlight">ì—ì´ë‹¤ ì›¡</span>: ì• ë¯¸ë€ë‹¤ê³µì¦(40.4%) + ì˜¤ë²„(${ (overZ*100).toFixed(2) }%)</li>
        </ul>
    `;

    // --- í•„ìš”í•œ ìµœì†Œ ì˜¤ë²„ ìˆ˜ì¹˜ ê³„ì‚° ë¡œì§ ---
    const insightEl = document.getElementById('insight-container');
    if (vz_z > vz_e) {
        insightEl.className = "insight-box success";
        insightEl.innerHTML = "âœ… <b>í˜„ì¬ ì •ìƒ ì„¸íŒ…:</b> ì›¡ ë²„ìŠ¤íŠ¸ ì‹œ ì›¡ì´ ì•„ì¸ë³´ë‹¤ ê°•í•©ë‹ˆë‹¤.";
    } else {
        // ì—­ì „ì´ ì¼ì–´ë‚¬ì„ ë•Œ: ì›¡ì´ ì•„ì¸ì„ ë”°ë¼ì¡ê¸° ìœ„í•´ í•„ìš”í•œ ì˜¤ë²„ë¡œë“œ ìˆ˜ì¹˜ ê³„ì‚°
        // ìˆ˜ì‹: (ì•„ì¸ê³µì¦í•© * ì•„ì¸ê¸°ì´ˆê³µ / ì›¡ê¸°ì´ˆê³µ) - (ì›¡ ê³ ì •ìŠ¤í‚¬ê³µì¦í•©)
        const targetOverZ = (((vz_e / atkZ) - (1 + ami + z1s + zB)) * 100).toFixed(2);
        insightEl.className = "insight-box alert";
        insightEl.innerHTML = `âš ï¸ <b>ì—­ì „ ë°œìƒ:</b> ì›¡ ë²„ìŠ¤íŠ¸ ë•Œ ì•„ì¸ì´ ë” ê°•í•©ë‹ˆë‹¤!<br>
        ì—ì´ë‹¤ ì›¡ì˜ ì˜¤ë²„ê³µì¦ì„ ìµœì†Œ <span class="highlight">${targetOverZ}%</span> ì´ìƒìœ¼ë¡œ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.`;
    }
}

function updateValue(id, val, compareVal) {
    const el = document.getElementById(id);
    el.innerText = Math.floor(val).toLocaleString();
    if (val > compareVal) el.classList.add('winner');
    else el.classList.remove('winner');
}

calculate();
</script>
</body>
</html>
